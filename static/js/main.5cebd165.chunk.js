(window.webpackJsonpadfontes=window.webpackJsonpadfontes||[]).push([[0],{131:function(t,e,r){t.exports=r(325)},17:function(t,e,r){"use strict";r.r(e),r.d(e,"clearSearchParameters",function(){return s}),r.d(e,"setSearchParameters",function(){return c}),r.d(e,"startSearchWorksFetch",function(){return u}),r.d(e,"completeSearchWorksFetch",function(){return p}),r.d(e,"fetchSearchWorksList",function(){return l}),r.d(e,"startQuotationAuthorsFetch",function(){return h}),r.d(e,"completeQuotationAuthorsFetch",function(){return f}),r.d(e,"fetchQuotationAuthors",function(){return m}),r.d(e,"startExpressionAuthorsFetch",function(){return d}),r.d(e,"completeExpressionAuthorsFetch",function(){return T}),r.d(e,"fetchExpressionAuthors",function(){return E}),r.d(e,"startQuotationWorksListFetch",function(){return v}),r.d(e,"completeQuotationWorksListFetch",function(){return y}),r.d(e,"fetchQuotationWorksList",function(){return O}),r.d(e,"startQuotationWorkPartsFetch",function(){return g}),r.d(e,"completeQuotationWorkPartsFetch",function(){return A}),r.d(e,"fetchQuotationWorkParts",function(){return _}),r.d(e,"startExpressionPartsFetch",function(){return P}),r.d(e,"completeExpressionPartsFetch",function(){return x}),r.d(e,"fetchExpressionParts",function(){return b}),r.d(e,"startQuotationExpressionTypeFetch",function(){return S}),r.d(e,"completeQuotationExpressionTypeFetch",function(){return C}),r.d(e,"fetchQuotationExpressionTypes",function(){return w}),r.d(e,"startExpressionTypeFetch",function(){return I}),r.d(e,"completeExpressionTypeFetch",function(){return R}),r.d(e,"fetchExpressionTypes",function(){return k}),r.d(e,"startWorkGroupsFetch",function(){return N}),r.d(e,"completeWorkGroupsFetch",function(){return j}),r.d(e,"fetchWorkGroups",function(){return q}),r.d(e,"startAuthorTypesFetch",function(){return L}),r.d(e,"completeAuthorTypesFetch",function(){return F}),r.d(e,"fetchAuthorTypes",function(){return Q}),r.d(e,"toggleGraphDisplay",function(){return D}),r.d(e,"startChartFetch",function(){return M}),r.d(e,"completeChartFetch",function(){return H}),r.d(e,"fetchChart",function(){return W}),r.d(e,"toggleImagesDisplay",function(){return U}),r.d(e,"startImagesFetch",function(){return G}),r.d(e,"completeImagesFetch",function(){return B}),r.d(e,"fetchImages",function(){return X}),r.d(e,"addQuotations",function(){return Y}),r.d(e,"clearQuotations",function(){return z}),r.d(e,"startQuotationsFetch",function(){return K}),r.d(e,"clearQuotationsFocus",function(){return V}),r.d(e,"completeQuotationsFetch",function(){return $}),r.d(e,"fetchQuotations",function(){return J}),r.d(e,"changeQuotationsFocus",function(){return Z}),r.d(e,"clearFocusedQuotation",function(){return tt}),r.d(e,"createFocusedQuotation",function(){return et}),r.d(e,"createCanonicalQuotation",function(){return rt}),r.d(e,"clearCanonicalQuotation",function(){return at}),r.d(e,"changeCanonicalQuotationsFocus",function(){return nt}),r.d(e,"clearCanonicalQuotationsFocus",function(){return ot}),r.d(e,"clearCanonicalQuotations",function(){return it}),r.d(e,"startCanonicalQuotationsFetch",function(){return st}),r.d(e,"completeCanonicalQuotationsFetch",function(){return ct}),r.d(e,"changeManifestationQuotationsFocus",function(){return ut}),r.d(e,"clearManifestationQuotationsFocus",function(){return pt}),r.d(e,"clearManifestationQuotations",function(){return lt}),r.d(e,"startManifestationQuotationsFetch",function(){return ht}),r.d(e,"completeManifestationQuotationsFetch",function(){return ft}),r.d(e,"fetchManifestationQuotations",function(){return mt}),r.d(e,"clearParagraph",function(){return dt}),r.d(e,"startParagraphFetch",function(){return Tt}),r.d(e,"completeParagraphFetch",function(){return Et}),r.d(e,"fetchParagraph",function(){return vt}),r.d(e,"startReviewFetch",function(){return yt}),r.d(e,"completeReviewFetch",function(){return Ot}),r.d(e,"fetchReview",function(){return gt}),r.d(e,"clearSourceParagraph",function(){return At}),r.d(e,"startSourceParagraphFetch",function(){return _t}),r.d(e,"completeSourceParagraphFetch",function(){return Pt}),r.d(e,"fetchSourceParagraph",function(){return xt}),r.d(e,"startSourceParagraphReviewFetch",function(){return bt}),r.d(e,"completeSourceParagraphReviewFetch",function(){return St}),r.d(e,"fetchSourceParagraphReview",function(){return Ct}),r.d(e,"toggleFullTextDisplay",function(){return wt}),r.d(e,"clearFullText",function(){return It}),r.d(e,"startFullTextFetch",function(){return Rt}),r.d(e,"completeFullTextFetch",function(){return kt}),r.d(e,"fetchFullText",function(){return Nt});var a=r(16),n=r.n(a),o="https://sparql-docker.scta.info/ds/query",i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?quotation",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?source";return["{",t+" <http://scta.info/property/source> "+e+" .","FILTER (!isBlank("+e+")) .","}","UNION","{",t+" <http://scta.info/property/source> ?bn .","?bn <http://scta.info/property/source> "+e+" .","}"].join("")},s=function(){return{type:"CLEAR_SEARCH_PARAMETERS"}},c=function(t){return{type:"SET_SEARCH_PARAMETERS",searchParameters:t}},u=function(){return{type:"START_SEARCH_WORKS_FETCH"}},p=function(t){return{type:"COMPLETE_SEARCH_WORKS_FETCH",listOfWorks:t}},l=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.workGroup&&(a=["<http://scta.info/resource/"+r.search.searchParameters.workGroup+"> <http://scta.info/property/hasExpression> ?expression ."].join(""));var i="";r.search.searchParameters.expressionAuthorType&&(i=["?expression <http://www.loc.gov/loc.terms/relators/AUT> ?expressionAuthor . ","?expressionAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> ."].join(""));var s="";r.search.searchParameters.expressionAuthor&&(s=["?expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> ."].join(""));var c=["SELECT ?type ?expression ?expressionShortId ?expressionTitle ?author ?authorTitle ?workGroup ?workGroupTitle","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression a ?type .","?expression <http://scta.info/property/level> '1' . ",i,a,s,"?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","?expression <http://purl.org/dc/terms/isPartOf> ?workGroup .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?expressionTitle"].join("");t(u()),n.a.get(o,{params:{query:c,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expression:t.expression.value,expressionShortId:t.expressionShortId?t.expressionShortId.value:"",expressionTitle:t.expressionTitle.value,workGroup:t.workGroup?t.workGroup.value:"",workGroupTitle:t.workGroupTitle?t.workGroupTitle.value:"",author:t.author?t.author.value:"",authorTitle:t.author?t.authorTitle.value:"",type:t.type.value}});t(p(r))})}},h=function(){return{type:"START_QUOTATION_AUTHORS_FETCH"}},f=function(t){return{type:"COMPLETE_QUOTATION_AUTHORS_FETCH",authors:t}},m=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.quotationAuthorType&&(a=["?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthorType+"> ."].join(""));var i="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(i="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var s="";r.search.searchParameters.quotationAuthorDateAfter&&(s="FILTER (?dateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var c="";r.search.searchParameters.quotationAuthorDateBefore&&(c="FILTER (?dateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var u=["SELECT DISTINCT ?author ?authorTitle ?authorShortId ","WHERE { ","?author a <http://scta.info/resource/person> .",a,i,"?resource a <http://scta.info/resource/expression> .","?resource <http://scta.info/property/level> '1' .","?resource <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://scta.info/property/shortId> ?authorShortId .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .",s,c,"}","ORDER BY ?authorTitle"].join("");t(h()),n.a.get(o,{params:{query:u,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{author:t.author.value,authorShortId:t.authorShortId.value,authorTitle:t.authorTitle.value}});t(f(r))})}},d=function(){return{type:"START_EXPRESSION_AUTHORS_FETCH"}},T=function(t){return{type:"COMPLETE_EXPRESSION_AUTHORS_FETCH",authors:t}},E=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.expressionAuthorType&&(a=["?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> ."].join(""));var i="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(i="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var s="";r.search.searchParameters.expressionAuthorDateAfter&&(s="FILTER (?dateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var c="";r.search.searchParameters.expressionAuthorDateBefore&&(c="FILTER (?dateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var u=["SELECT DISTINCT ?author ?authorTitle ?authorShortId ","WHERE { ","?author a <http://scta.info/resource/person> .",a,i,"?resource a <http://scta.info/resource/expression> .","?resource <http://scta.info/property/level> '1' .","?resource <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://scta.info/property/shortId> ?authorShortId .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .",s,c,"}","ORDER BY ?authorTitle"].join("");t(d()),n.a.get(o,{params:{query:u,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{author:t.author.value,authorShortId:t.authorShortId.value,authorTitle:t.authorTitle.value}});t(T(r))})}},v=function(){return{type:"START_QUOTATION_WORKS_LIST_FETCH"}},y=function(t){return{type:"COMPLETE_QUOTATION_WORKS_LIST_FETCH",quotationWorksList:t}},O=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.quotationWorkGroup&&(a=["<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?expression ."].join(""));var i="";r.search.searchParameters.quotationAuthor&&(i=["?expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthor+"> ."].join(""));var s="";r.search.searchParameters.quotationAuthorType&&(s=["?expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ","?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthorType+"> ."].join(""));var c=["SELECT ?type ?expression ?expressionShortId ?expressionTitle ?author ?authorTitle ?workGroup ?workGroupTitle","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression a ?type .","?expression <http://scta.info/property/level> '1' . ",s,a,i,"?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","OPTIONAL { ","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","?expression <http://purl.org/dc/terms/isPartOf> ?workGroup .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?expressionTitle"].join("");t(v()),n.a.get(o,{params:{query:c,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expression:t.expression.value,expressionShortId:t.expressionShortId?t.expressionShortId.value:"",expressionTitle:t.expressionTitle.value,workGroup:t.workGroup?t.workGroup.value:"",workGroupTitle:t.workGroupTitle?t.workGroupTitle.value:"",author:t.author?t.author.value:"",authorTitle:t.author?t.authorTitle.value:"",type:t.type.value}});t(y(r))})}},g=function(){return{type:"START_QUOTATION_WORK_PARTS_FETCH"}},A=function(t){return{type:"COMPLETE_QUOTATION_WORK_PARTS_FETCH",parts:t}},_=function(){return function(t,e){var r=e(),a=["SELECT ?grandparent ?grandparent_title ?parent_title ?parent ?child ?child_title ","WHERE { ","BIND(<http://scta.info/resource/"+(""!=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:""!=r.search.searchParameters.quotationWork?r.search.searchParameters.quotationWork:"")+"> AS ?parent)","OPTIONAL {","?parent <http://purl.org/dc/elements/1.1/title> ?parent_title","}","OPTIONAL {","?parent <http://purl.org/dc/terms/hasPart> ?child .","?child <http://purl.org/dc/elements/1.1/title> ?child_title .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/isPartOf> ?grandparent .","?grandparent <http://purl.org/dc/elements/1.1/title> ?grandparent_title","}","}"].join("");t(g()),n.a.get(o,{params:{query:a,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{grandparent:t.grandparent?t.grandparent.value:"",grandparent_title:t.grandparent_title?t.grandparent_title.value:"",parent:t.parent.value,parent_title:t.parent_title?t.parent_title.value:"",child:t.child?t.child.value:"",child_title:t.child_title?t.child_title.value:""}});t(A(r))})}},P=function(){return{type:"START_EXPRESSION_PARTS_FETCH"}},x=function(t){return{type:"COMPLETE_EXPRESSION_PARTS_FETCH",parts:t}},b=function(){return function(t,e){var r=e(),a="",i=["SELECT ?grandparent ?grandparent_title ?grandparent_level ?parent_title ?parent ?parent_level ?child ?child_level ?child_title ","WHERE { ","BIND(<http://scta.info/resource/"+(a=""!=r.search.searchParameters.expressionPart?r.search.searchParameters.expressionPart:""!=r.search.searchParameters.expressionId?r.search.searchParameters.expressionId:"")+"> AS ?parent)","OPTIONAL {","?parent <http://purl.org/dc/elements/1.1/title> ?parent_title .","?parent <http://scta.info/property/level> ?parent_level .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/hasPart> ?child .","?child <http://purl.org/dc/elements/1.1/title> ?child_title .","?child <http://scta.info/property/level> ?child_level .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/isPartOf> ?grandparent .","?grandparent <http://purl.org/dc/elements/1.1/title> ?grandparent_title .","?grandparent <http://scta.info/property/level> ?grandparent_level .","}","}"].join("");a&&(t(P()),n.a.get(o,{params:{query:i,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{grandparent:t.grandparent?t.grandparent.value:"",grandparent_title:t.grandparent_title?t.grandparent_title.value:"",grandparent_level:t.grandparent_level?t.grandparent_level.value:"",parent:t.parent.value,parent_title:t.parent_title?t.parent_title.value:"",parent_level:t.parent_level?t.parent_level.value:"",child:t.child?t.child.value:"",child_title:t.child_title?t.child_title.value:"",child_level:t.child_level?t.child_level.value:""}});t(x(r))}))}},S=function(){return{type:"START_QUOTATION_EXPRESSION_TYPE_FETCH"}},C=function(t){return{type:"COMPLETE_QUOTATION_EXPRESSION_TYPE_FETCH",quotationExpressionTypes:t}},w=function(){return function(t,e){e();var r=["SELECT ?quotationExpressionType ?quotationExpressionTypeTitle ?quotationExpressionTypeShortId ","WHERE { ","?quotationExpressionType a <http://scta.info/resource/expressionType> .","?quotationExpressionType <http://scta.info/property/shortId> ?quotationExpressionTypeShortId .","?quotationExpressionType <http://purl.org/dc/elements/1.1/title> ?quotationExpressionTypeTitle .","}","ORDER BY ?quotationExpressionTypeTitle"].join("");t(S()),n.a.get(o,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{quotationExpressionType:t.quotationExpressionType.value,quotationExpressionTypeShortId:t.quotationExpressionTypeShortId.value,quotationExpressionTypeTitle:t.quotationExpressionTypeTitle.value}});t(C(r))})}},I=function(){return{type:"START_EXPRESSION_TYPE_FETCH"}},R=function(t){return{type:"COMPLETE_EXPRESSION_TYPE_FETCH",expressionTypes:t}},k=function(){return function(t,e){e();var r=["SELECT ?expressionType ?expressionTypeTitle ?expressionTypeShortId ","WHERE { ","?expressionType a <http://scta.info/resource/expressionType> .","?expressionType <http://scta.info/property/shortId> ?expressionTypeShortId .","?expressionType <http://purl.org/dc/elements/1.1/title> ?expressionTypeTitle .","}","ORDER BY ?expressionTypeTitle"].join("");t(I()),n.a.get(o,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expressionType:t.expressionType.value,expressionTypeShortId:t.expressionTypeShortId.value,expressionTypeTitle:t.expressionTypeTitle.value}});t(R(r))})}},N=function(){return{type:"START_WORK_GROUPS_FETCH"}},j=function(t){return{type:"COMPLETE_WORK_GROUPS_FETCH",workGroups:t}},q=function(){return function(t,e){e();var r=["SELECT ?workGroup ?workGroupShortId ?workGroupTitle ","WHERE { ","?workGroup a <http://scta.info/resource/workGroup> .","?workGroup <http://scta.info/property/shortId> ?workGroupShortId .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?workGroupTitle"].join("");t(N()),n.a.get(o,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{workGroup:t.workGroup.value,workGroupShortId:t.workGroupShortId.value,workGroupTitle:t.workGroupTitle.value}});t(j(r))})}},L=function(){return{type:"START_AUTHOR_TYPES_FETCH"}},F=function(t){return{type:"COMPLETE_AUTHOR_TYPES_FETCH",authorTypes:t}},Q=function(){return function(t,e){e();var r=["SELECT ?authorType ?authorTypeTitle ?authorTypeShortId ","WHERE { ","?authorType a <http://scta.info/resource/personType> .","?authorType <http://scta.info/property/shortId> ?authorTypeShortId .","?authorType <http://purl.org/dc/elements/1.1/title> ?authorTypeTitle .","}","ORDER BY ?authorTypeTitle"].join("");t(L()),n.a.get(o,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{authorType:t.authorType.value,authorTypeShortId:t.authorTypeShortId.value,authorTypeTitle:t.authorTypeTitle.value}});t(F(r))})}},D=function(t){return{type:"TOGGLE_GRAPH_DISPLAY",current:t}},M=function(){return{type:"START_CHART_FETCH"}},H=function(t){return{type:"COMPLETE_CHART_FETCH",count:t}},W=function(){return function(t,e){var r=e(),a=parseInt(r.search.searchParameters.expressionLevel);1===a&&(a=2);var s=r.search.searchParameters.searchText||"",c="";r.search.searchParameters.workGroup&&(c=["?ref <http://purl.org/dc/terms/isPartOf> <http://scta.info/resource/"+r.search.searchParameters.workGroup+">  . "].join(""));var u="";r.search.searchParameters.expressionAuthorType&&(u="?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> .");var p="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(p="?author <http://scta.info/property/dateOfBirth> ?expressionAuthorDateOfBirth .");var l="";r.search.searchParameters.expressionAuthorDateAfter&&(l="FILTER (?expressionAuthorDateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var h="";r.search.searchParameters.expressionAuthorDateBefore&&(h="FILTER (?expressionAuthorDateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var f="";r.search.searchParameters.expressionAuthor&&(f="?ref <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> .");var m=["?ref <http://www.loc.gov/loc.terms/relators/AUT> ?author . ",u,p,f].join(""),d="";r.search.searchParameters.quotationAuthorType&&(d="?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+(A=r.search.searchParameters.quotationAuthorType)+">  . ");var T="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(T="?quotationAuthor <http://scta.info/property/dateOfBirth> ?quotationAuthorDateOfBirth .");var E="";r.search.searchParameters.quotationAuthorDateAfter&&(E="FILTER (?quotationAuthorDateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var v="";r.search.searchParameters.quotationAuthorDateBefore&&(v="FILTER (?quotationAuthorDateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var y="";r.search.searchParameters.quotationAuthor&&(y="?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+(A=r.search.searchParameters.quotationAuthor)+">  . ");var O="";if(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore||r.search.searchParameters.quotationAuthor||r.search.searchParameters.quotationAuthorType)O=[i("?element"),"?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",d,T,y].join("");var g="";if(r.search.searchParameters.quotationWorkGroup){var A=r.search.searchParameters.quotationWorkGroup;g=[i("?element"),"?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression ."].join("")}var _="";if(r.search.searchParameters.quotationWork||r.search.searchParameters.quotationWorkPart){A=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:r.search.searchParameters.quotationWork;_=["\n#check for quotation whose source is a member the search expression\n","{",i("?element"),"?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+A+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{",i("?element","<http://scta.info/resource/"+A+">"),"}"].join("")}var P="";if(P="structureElementRef"===r.search.searchParameters.structureElementType?["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?element <http://scta.info/property/isReferenceTo> ?isReferenceTo . }"].join(""):"structureElementRefDup"===r.search.searchParameters.structureElementType?"?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .":"structureElementQuote"===r.search.searchParameters.structureElementType?"?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .":"allDup"===r.search.searchParameters.structureElementType?["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> . }"].join(""):["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?element <http://scta.info/property/isReferenceTo> ?isReferenceTo . }","}"].join(""),r.search.searchParameters.expressionId)var x=["SELECT ?ref ?reftitle ?totalOrderNumber (count(?element) as ?count) ","WHERE {","?ref a <http://scta.info/resource/expression> .","?ref <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+r.search.searchParameters.expressionId+"> .","?ref <http://scta.info/property/level> '"+a+"' .","?ref <http://purl.org/dc/elements/1.1/title> ?reftitle .","OPTIONAL {","?ref <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","OPTIONAL {","?element <http://scta.info/property/isMemberOf> ?ref .",P,"?element <http://scta.info/property/structureElementText> ?quotation_text .",O,g,_,"}",v,E,"FILTER (REGEX(STR(?quotation_text), '"+s+"', 'i')) .","}","group by ?ref ?reftitle ?totalOrderNumber ","ORDER BY ?totalOrderNumber "].join("");else x=["SELECT ?ref ?reftitle ?totalOrderNumber (count(?element) as ?count) ","WHERE {","?ref a <http://scta.info/resource/expression> .","?ref <http://scta.info/property/level> '1' .",c,m,"?ref <http://purl.org/dc/elements/1.1/title> ?reftitle .","OPTIONAL {","?ref <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","OPTIONAL {","?element <http://scta.info/property/isMemberOf> ?ref .",P,"?element <http://scta.info/property/structureElementText> ?quotation_text .",O,g,_,"}",v,E,h,l,"FILTER (REGEX(STR(?quotation_text), '"+s+"', 'i')) .","}","group by ?ref ?reftitle ?totalOrderNumber ","ORDER BY ?totalOrderNumber "].join("");t(M()),n.a.get(o,{params:{query:x,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{item:t.ref?t.ref.value:"",title:t.reftitle?t.reftitle.value:"",count:t.count?t.count.value:""}});t(H(r))})}},U=function(t){return{type:"TOGGLE_IMAGES_DISPLAY",current:t}},G=function(){return{type:"START_IMAGES_FETCH"}},B=function(t){return{type:"COMPLETE_IMAGES_FETCH",images:t}},X=function(){return function(t,e){var r=["SELECT ?url ","WHERE { ","<"+e().paragraph.manifestation_id+"> <http://scta.info/property/isOnSurface> ?surface .","?surface <http://scta.info/property/hasISurface> ?isurface .","?isurface <http://scta.info/property/hasCanvas> ?canvas .","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?anno .","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?anno .","?anno <http://www.w3.org/1999/02/22-rdf-syntax-ns#first> ?imgres .","?imgres <http://www.w3.org/ns/oa#hasBody> ?body .","?body <http://rdfs.org/sioc/services#has_service> ?url .","}"].join("");t(G()),n.a.get(o,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{url:t.url.value}});t(B(r))})}},Y=function(t){return{type:"ADD_QUOTATIONS",quotations:t}},z=function(){return{type:"CLEAR_QUOTATIONS"}},K=function(){return{type:"START_QUOTATIONS_FETCH"}},V=function(){return{type:"CLEAR_QUOTATIONS_FOCUS"}},$=function(t){return{type:"COMPLETE_QUOTATIONS_FETCH",quotations:t}},J=function(){return function(t,e){var r=e(),a=r.search.searchParameters.searchText||"",s="";if(r.search.searchParameters.expressionId||r.search.searchParameters.expressionPart)s=["?quotation <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(g=r.search.searchParameters.expressionPart?r.search.searchParameters.expressionPart:r.search.searchParameters.expressionId)+"> ."].join("");var c="";r.search.searchParameters.expressionAuthorType&&(c="?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> .");var u="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(u="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var p="";r.search.searchParameters.expressionAuthorDateAfter&&(p="FILTER (?dateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var l="";r.search.searchParameters.expressionAuthorDateBefore&&(l="FILTER (?dateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var h="";r.search.searchParameters.expressionAuthor&&(h="?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> .");var f=["?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ",c,u,h,"?author <http://purl.org/dc/elements/1.1/title> ?author_title . "].join(""),m="";r.search.searchParameters.quotationAuthorType&&(m="?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+(g=r.search.searchParameters.quotationAuthorType)+">  . ");var d="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(d="?quotationAuthor <http://scta.info/property/dateOfBirth> ?quotationAuthorDateOfBirth .");var T="";r.search.searchParameters.quotationAuthorDateAfter&&(T="FILTER (?quotationAuthorDateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var E="";r.search.searchParameters.quotationAuthorDateBefore&&(E="FILTER (?quotationAuthorDateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var v="";r.search.searchParameters.quotationAuthor&&(v="?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+(g=r.search.searchParameters.quotationAuthor)+">  . ");var y="";if(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore||r.search.searchParameters.quotationAuthor||r.search.searchParameters.quotationAuthorType)y=[i(),"?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",m,d,v].join("");var O="";if(r.search.searchParameters.quotationWorkGroup){var g=r.search.searchParameters.quotationWorkGroup;O=[i(),"?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression ."].join("")}var A="";if(r.search.searchParameters.quotationWork||r.search.searchParameters.quotationWorkPart){g=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:r.search.searchParameters.quotationWork;A=["\n#check for quotation whose source is a member the search expression\n","{",i(),"?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+g+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{",i("?quotation","<http://scta.info/resource/"+g+">"),"}"].join("")}var _="";if(r.search.searchParameters.quotationExpressionType){var P=r.search.searchParameters.quotationExpressionType;_=["\n#check for quotation whose source is a member the search expression\n","{",i(),"?source <http://scta.info/property/isMemberOf> ?memberOf .","?memberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+P+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{",i(),"?source <http://scta.info/property/expressionType> <http://scta.info/resource/"+P+"> .","}"].join("")}var x="";r.search.searchParameters.workGroup&&(x=["<http://scta.info/resource/"+r.search.searchParameters.workGroup+"> <http://scta.info/property/hasExpression> ?toplevel_expression ."].join(""));var b="";r.search.searchParameters.expressionType&&(b=["?quotation <http://scta.info/property/isMemberOf> ?expressionIsmemberOf .","?expressionIsmemberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+r.search.searchParameters.expressionType+"> ."].join(""));var S=["SELECT ?quotation ?source ?isInstanceOf ?quotation_text ?toplevel_expression_title ?author_title ?citation ?ref ?refText ?refType ","WHERE {","structureElementRef"===r.search.searchParameters.structureElementType?["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?quotation <http://scta.info/property/isReferenceTo> ?isReferenceTo . }"].join(""):"structureElementRefDup"===r.search.searchParameters.structureElementType?"?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .":"structureElementQuote"===r.search.searchParameters.structureElementType?"?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .":"allDup"===r.search.searchParameters.structureElementType?["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> . }"].join(""):["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?quotation <http://scta.info/property/isReferenceTo> ?isReferenceTo . }","}"].join(""),"?quotation <http://scta.info/property/structureElementType> ?refType . ","?quotation a <http://scta.info/resource/expression> .",i(),s,y,O,A,_,"?quotation <http://scta.info/property/structureElementText> ?quotation_text .","?quotation <http://scta.info/property/isPartOfTopLevelExpression> ?toplevel_expression . ",b,x,h,"?toplevel_expression <http://purl.org/dc/elements/1.1/title> ?toplevel_expression_title . ",f,"OPTIONAL {","?quotation <http://scta.info/property/citation> ?citation . ","}","OPTIONAL {","?ref <http://scta.info/property/isReferenceTo> ?quotation . ","?ref <http://scta.info/property/structureElementText> ?refText . ","}",p,l,T,E,"FILTER (REGEX(STR(?quotation_text), '"+a+"', 'i')) .","}","ORDER BY ?quotation_text ","LIMIT 100"].join("");t(K()),n.a.get(o,{params:{query:S,output:"json"}}).then(function(e){var r=e.data.results.bindings;t($(r))})}},Z=function(t){return{type:"CHANGE_QUOTATIONS_FOCUS",id:t}},tt=function(){return{type:"CLEAR_FOCUSED_QUOTATION"}},et=function(t){return{type:"CREATE_FOCUSED_QUOTATION",quotation:t}},rt=function(t){return{type:"CREATE_CANONICAL_QUOTATION",quotation:t}},at=function(){return{type:"CLEAR_CANONICAL_QUOTATION"}},nt=function(t){return{type:"CHANGE_CANONICAL_QUOTATIONS_FOCUS",id:t}},ot=function(){return{type:"CLEAR_CANONICAL_QUOTATIONS_FOCUS"}},it=function(){return{type:"CLEAR_CANONICAL_QUOTATIONS"}},st=function(){return{type:"START_CANONICAL_QUOTATIONS_FETCH"}},ct=function(t){return{type:"COMPLETE_CANONICAL_QUOTATIONS_FETCH",canonicalQuotations:t}},ut=function(t){return{type:"CHANGE_MANIFESTATION_QUOTATIONS_FOCUS",id:t}},pt=function(){return{type:"CLEAR_MANIFESTATION_QUOTATIONS_FOCUS"}},lt=function(){return{type:"CLEAR_MANIFESTATION_QUOTATIONS"}},ht=function(){return{type:"START_MANIFESTATION_QUOTATIONS_FETCH"}},ft=function(t){return{type:"COMPLETE_MANIFESTATION_QUOTATIONS_FETCH",manifestationQuotations:t}},mt=function(){return function(t,e){var r=e(),a=r.search.searchParameters.searchText||"",i="";void 0!=r.focusedQuotation.id?i=["SELECT ?quotation ?isManifestationOf ?quotation_text ?canonicalTranscription ","WHERE {","<"+r.focusedQuotation.id+"> <http://scta.info/property/hasManifestation> ?quotation .","?quotation <http://scta.info/property/isManifestationOf> ?isManifestationOf .","?quotation <http://scta.info/property/structureElementText> ?quotation_text .","OPTIONAL","{","?quotation <http://scta.info/property/hasCanonicalTranscription> ?canonicalTranscription .","}","}"].join(""):i=["SELECT ?quotation ?isManifestationOf ?quotation_text ?canonicalTranscription ","WHERE {","?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .","?quotation a <http://scta.info/resource/manifestation> .","?quotation <http://scta.info/property/isManifestationOf> ?isManifestationOf .","?quotation <http://scta.info/property/structureElementText> ?quotation_text .","OPTIONAL","{","?quotation <http://scta.info/property/hasCanonicalTranscription> ?canonicalTranscription .","}","FILTER (REGEX(STR(?quotation_text), '"+a+"', 'i')) .","}","ORDER BY ?isInstanceOf ","LIMIT 100"].join("");t(ht()),n.a.get(o,{params:{query:i,output:"json"}}).then(function(e){var r=e.data.results.bindings;t(ft(r))})}},dt=function(){return{type:"CLEAR_PARAGRAPH"}},Tt=function(){return{type:"START_PARAGRAPH_FETCH"}},Et=function(t){return{type:"COMPLETE_PARAGRAPH_FETCH",paragraph:t}},vt=function(){return function(t,e){var r=e();if(r.focusedQuotation){var a=r.focusedQuotation.id,i="",s=r.focusedQuotation.type;"expression"===s?i=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","<"+a+"> <http://scta.info/property/isPartOfStructureBlock> ?expression_paragraph .","?expression_paragraph <http://scta.info/property/hasCanonicalManifestation> ?manifestation_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/isManifestationOf> ?expression_paragraph .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"manifestation"===s&&(i=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","<"+a+"> <http://scta.info/property/isPartOfStructureBlock> ?manifestation_paragraph . ","?manifestation_paragraph <http://scta.info/property/isManifestationOf> ?expression_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join("")),t(Tt()),n.a.get(o,{params:{query:i,output:"json"}}).then(function(e){var r=e.data;r.hasXML&&n.a.get(r.hasXML.replace("http://","https://")).then(function(e){var a={expression_id:r["@id"],manifestations:r.hasManifestations,manifestation_id:r.hasDefaultManifestation,transcription_id:r.hasDefaultTranscription,transcription_item_file:r.hasDocument.replace("http://","https://"),paragraph_text:e.data};t(Et(a)),t(gt())})}).catch(function(t){console.log("error:",t)})}}},yt=function(){return{type:"START_REVIEW_FETCH"}},Ot=function(t){return{type:"COMPLETE_REVIEW_FETCH",review:t}},gt=function(){return function(t,e){var r=e();if(r.paragraph.transcription_item_file){var a="https://dll-review-registry.scta.info/api/v1/reviews?url="+r.paragraph.transcription_item_file+"&society=MAA";t(yt()),n.a.get(a).then(function(e){var r=e.data[0];t(Ot(r))})}}},At=function(){return{type:"CLEAR_SOURCE_PARAGRAPH"}},_t=function(){return{type:"START_SOURCE_PARAGRAPH_FETCH"}},Pt=function(t){return{type:"COMPLETE_SOURCE_PARAGRAPH_FETCH",sourceParagraph:t}},xt=function(){return function(t,e){var r=e();if(r.focusedQuotation){var a=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","BIND(<"+r.focusedQuotation.source+"> as ?expression_paragraph) .","?expression_paragraph <http://scta.info/property/hasCanonicalManifestation> ?manifestation_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join("");t(_t()),n.a.get(o,{params:{query:a,output:"json"}}).then(function(e){var r=e.data;r.hasXML&&n.a.get(r.hasXML.replace("http://","https://")).then(function(e){var a={expression_id:r["@id"],manifestations:r.hasManifestations,manifestation_id:r.hasDefaultManifestation,transcription_id:r.hasDefaultTranscription,transcription_item_file:r.hasDocument.replace("http://","https://"),paragraph_text:e.data};console.log("sourceP",a),t(Pt(a))})})}}},bt=function(){return{type:"START_SOURCE_PARAGRAPH_REVIEW_FETCH"}},St=function(t){return{type:"COMPLETE_SOURCE_PARAGRAPH_FETCH",review:t}},Ct=function(){return function(t,e){var r=e();if(r.sourceParagraph.transcription_item_file){var a="https://dll-review-registry.scta.info/api/v1/reviews?url="+r.sourceParagraph.transcription_item_file+"&society=MAA";t(_t()),n.a.get(a).then(function(e){var r=e.data[0];t(St(r))})}}},wt=function(t){return{type:"TOGGLE_FULL_TEXT_DISPLAY",current:t}},It=function(){return{type:"CLEAR_FULL_TEXT"}},Rt=function(){return{type:"START_FULL_TEXT_FETCH"}},kt=function(t){return{type:"COMPLETE_FULL_TEXT_FETCH",text:t}},Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,r){var a=r(),i="";if(a.focusedQuotation){var s=a.focusedQuotation.id,c=a.focusedQuotation.type;!0===t?i=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","BIND(<"+a.focusedQuotation.source+"> AS ?expression_block) .","?expression_block <http://scta.info/property/isPartOfStructureItem> ?expression_item .","?expression_item <http://scta.info/property/hasCanonicalManifestation> ?manifestation_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"expression"===c?i=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","<"+s+"> <http://scta.info/property/isPartOfStructureBlock> ?expression_block .","?expression_block <http://scta.info/property/isPartOfStructureItem> ?expression_item .","?expression_item <http://scta.info/property/hasCanonicalManifestation> ?manifestation_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"manifestation"===c&&(i=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","<"+s+"> <http://scta.info/property/isPartOfStructureBlock> ?manifestation_block . ","?manifestation_block <http://scta.info/property/isPartOfStructureItem> ?manifestation_item .","?manifestation_item <http://scta.info/property/isManifestationOf> ?expression_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join("")),e(Rt()),n.a.get(o,{params:{query:i,output:"json"}}).then(function(t){var r=t.data.results.bindings[0];n.a.get(r.xml_url.value.replace("http://","https://")).then(function(t){var a={expression_id:r.expression_item.value,manifestation_id:r.manifestation_item.value,transcription_id:r.transcription_item.value,transcription_item_file:r.transcription_item_file?r.transcription_item_file.value.replace("http://","https://"):"",text:t.data};e(kt(a)),e(gt())})})}}}},294:function(t,e){var r={handlers:{eg:["<pre>","</pre>"],ptr:['<a href="$rw@target">$@target</a>'],graphic:function(t){var e=new Image;return e.src=this.rw(t.getAttribute("url")),t.hasAttribute("width")&&(e.width=t.getAttribute("width").replace(/[^.0-9]/g,"")),t.hasAttribute("height")&&(e.height=t.getAttribute("height").replace(/[^.0-9]/g,"")),e},list:function(t){if(t.hasAttribute("type")&&"gloss"==t.getAttribute("type")){for(var e=document.createElement("dl"),r=0,a=Array.from(t.children);r<a.length;r++){var n=a[r];if(n.nodeType==Node.ELEMENT_NODE){if("tei-label"==n.localName){var o=document.createElement("dt");o.innerHTML=n.innerHTML,e.appendChild(o)}if("tei-item"==n.localName){var i=document.createElement("dd");i.innerHTML=n.innerHTML,e.appendChild(i)}}}return e}return null},table:function(t){var e=document.createElement("table");if(e.innerHTML=t.innerHTML,"tei-head"==e.firstElementChild.localName){var r=e.firstElementChild;r.remove();var a=document.createElement("caption");a.innerHTML=r.innerHTML,e.appendChild(a)}for(var n=0,o=Array.from(e.querySelectorAll("tei-row"));n<o.length;n++){var i=o[n],s=document.createElement("tr");s.innerHTML=i.innerHTML;for(var c=0,u=Array.from(i.attributes);c<u.length;c++){var p=u[c];s.setAttribute(p.name,p.value)}i.parentElement.replaceChild(s,i)}for(var l=0,h=Array.from(e.querySelectorAll("tei-cell"));l<h.length;l++){var f=h[l],m=document.createElement("td");f.hasAttribute("cols")&&m.setAttribute("colspan",f.getAttribute("cols")),m.innerHTML=f.innerHTML;for(var d=0,T=Array.from(f.attributes);d<T.length;d++){var E=T[d];m.setAttribute(E.name,E.value)}f.parentElement.replaceChild(m,f)}return e},egXML:function(t){var e=document.createElement("pre");return e.innerHTML=this.serialize(t,!0),e}}};t.exports=r},323:function(t,e,r){},325:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r.n(a),o=r(49),i=r.n(o),s=r(18),c=r(8),u=r(9),p=r(12),l=r(10),h=r(13),f=r(19),m=r(5),d=r(1),T=r(53);function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}var v=r(18).connect,y=r(17),O=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleSetSearchText=r.handleSetSearchText.bind(Object(m.a)(r)),r.handleOnShowQuotationsWithoutAssociation=r.handleOnShowQuotationsWithoutAssociation.bind(Object(m.a)(r)),r.handleRunQuery=r.handleRunQuery.bind(Object(m.a)(r)),r.handleGraph=r.handleGraph.bind(Object(m.a)(r)),r.handleClearFilters=r.handleClearFilters.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleSetSearchText",value:function(t){var e=this.props,r=e.dispatch,a=(e.search,this.refs.searchText.value),n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(r,!0).forEach(function(e){Object(f.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props.search.searchParameters,{searchText:a});r(y.setSearchParameters(n))}},{key:"handleOnShowQuotationsWithoutAssociation",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch,a=(e.search,this.refs.quotationWorkGroup.value),n=this.refs.quotationExpressionType.value,o=this.refs.quotationWork.value,i=this.refs.quotationWorkPart.value,s=this.refs.expressionId.value,c=this.refs.expressionPart.value?this.refs.expressionPart.value.split("/")[0]:this.refs.expressionPart.value,u=this.refs.expressionPart.value?this.refs.expressionPart.value.split("/")[1]:1,p=this.refs.expressionAuthor.value,l=this.refs.expressionAuthorType.value,h={expressionId:s,expressionPart:c,expressionLevel:u,expressionAuthor:p,quotationAuthor:this.refs.quotationAuthor.value,quotationExpressionType:n,quotationWork:o,quotationWorkPart:i,quotationWorkGroup:a,quotationAuthorType:this.refs.quotationAuthorType.value,expressionAuthorType:l,expressionType:this.refs.expressionType.value,workGroup:this.refs.workGroup.value,quotationAuthorDateAfter:this.refs.quotationAuthorDateAfter.value,quotationAuthorDateBefore:this.refs.quotationAuthorDateBefore.value,expressionAuthorDateAfter:this.refs.expressionAuthorDateAfter.value,expressionAuthorDateBefore:this.refs.expressionAuthorDateBefore.value,structureElementType:this.refs.structureElementType.value};r(y.setSearchParameters(h)),r(y.fetchQuotationWorkParts()),r(y.fetchExpressionParts()),r(y.fetchSearchWorksList()),r(y.fetchQuotationWorksList()),r(y.fetchQuotationAuthors()),r(y.fetchExpressionAuthors())}},{key:"handleRunQuery",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch;e.search;r(y.clearFocusedQuotation()),r(y.clearManifestationQuotations()),r(y.clearParagraph()),r(y.clearSourceParagraph()),r(y.fetchQuotations()),r(y.fetchChart())}},{key:"handleClearFilters",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch;e.search;r(y.clearSearchParameters()),r(y.clearCanonicalQuotations()),r(y.clearQuotations()),r(y.fetchQuotationWorkParts()),r(y.fetchExpressionParts()),r(y.fetchQuotationAuthors()),r(y.fetchExpressionAuthors()),r(y.fetchSearchWorksList()),r(y.fetchQuotationWorksList()),r(y.fetchWorkGroups()),r(y.fetchAuthorTypes()),r(y.clearManifestationQuotations()),r(y.clearParagraph()),r(y.clearSourceParagraph()),this.refs.quotationAuthorDateAfter.value="",this.refs.quotationAuthorDateBefore.value="",this.refs.expressionAuthorDateAfter.value="",this.refs.expressionAuthorDateBefore.value="",this.refs.searchText.value=""}},{key:"handleGraph",value:function(t){t.preventDefault(),(0,this.props.dispatch)(y.toggleGraphDisplay(this.props.chart.visible))}},{key:"render",value:function(){var t=this;function e(){return t.props.search.workGroups.map(function(t){return n.a.createElement("option",{value:t.workGroupShortId},t.workGroupTitle)})}return n.a.createElement("div",null,n.a.createElement(d.default,{onSubmit:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(T.default,{id:"runQuery",onClick:this.handleRunQuery},"Run Search"),n.a.createElement(T.default,{id:"clearFilter",onClick:this.handleClearFilters},"Clear Filters")),n.a.createElement("div",null,n.a.createElement("p",null,"Search Parameters"),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation/ReferenceType"),n.a.createElement(d.default.Control,{as:"select",ref:"structureElementType",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:"structureElementQuote"},"Quotations"),n.a.createElement("option",{value:"structureElementRef"},"References"),n.a.createElement("option",{value:"structureElementRefDup"},"References (With Quotation Overlap)"),n.a.createElement("option",{value:""},"All"),n.a.createElement("option",{value:"allDup"},"All (with quotation overlap)"))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,n.a.createElement(d.default.Control,{as:"input",type:"text",ref:"searchText",placeholder:"search quotation text",onChange:this.handleSetSearchText}))),n.a.createElement("hr",null),n.a.createElement("p",null,"Quotation Parameters"),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Author Type"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationAuthorType",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),t.props.search.authorTypes.map(function(t){return n.a.createElement("option",{value:t.authorTypeShortId},t.authorTypeTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Author Birth Date"),n.a.createElement("br",null),"After ",n.a.createElement(d.default.Control,{as:"input",ref:"quotationAuthorDateAfter",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1200"}),n.a.createElement("br",null),"Before ",n.a.createElement(d.default.Control,{as:"input",ref:"quotationAuthorDateBefore",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1400"})),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Author"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationAuthor",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationAuthor},n.a.createElement("option",{value:""},"All"),t.props.search.quotationAuthors.map(function(t){return n.a.createElement("option",{value:t.authorShortId},t.authorTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Work Group"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationWorkGroup",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),e())),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Text Type"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationExpressionType",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),t.props.search.quotationExpressionTypes.map(function(t){return n.a.createElement("option",{value:t.quotationExpressionTypeShortId},t.quotationExpressionTypeTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Text Title"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationWork",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationWork},n.a.createElement("option",{value:""},"All"),t.props.search.quotationWorksList.map(function(t){var e=t.expressionShortId?t.expressionShortId:t.expression.split("http://scta.info/resource/")[1];return n.a.createElement("option",{value:e},t.expressionTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Quotation Text Part"),n.a.createElement(d.default.Control,{as:"select",ref:"quotationWorkPart",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationWorkPart},n.a.createElement("option",{value:""},"All"),function(){var e=t.props.search.quotationWorkParts;if(e){var r=e[0];if(r){var a=r.grandparent.split("http://scta.info/resource/")[1];if(void 0!=a)return n.a.createElement("option",{value:a},"Up: ",r.grandparent_title)}}}(),function(){var e=t.props.search.quotationWorkParts;if(e){var r=e[0];if(r){var a=r.parent.split("http://scta.info/resource/")[1];return n.a.createElement("option",{value:a},"Current: ",r.parent_title)}}}(),function(){var e=t.props.search.quotationWorkParts;if(e)return e.map(function(t){var e=t.childShortId?t.childShortId:t.child.split("http://scta.info/resource/")[1];if(t.child)return n.a.createElement("option",{value:e},t.child_title)})}())),n.a.createElement("hr",null),n.a.createElement("p",null,"Text Parameters"),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Author Type"),n.a.createElement(d.default.Control,{as:"select",ref:"expressionAuthorType",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),t.props.search.authorTypes.map(function(t){return n.a.createElement("option",{value:t.authorTypeShortId},t.authorTypeTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Author Birth Date"),n.a.createElement("br",null),"After ",n.a.createElement(d.default.Control,{as:"input",ref:"expressionAuthorDateAfter",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1200"}),n.a.createElement("br",null),"Before ",n.a.createElement(d.default.Control,{as:"input",ref:"expressionAuthorDateBefore",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1400"})),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Author"),n.a.createElement(d.default.Control,{as:"select",ref:"expressionAuthor",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionAuthor},n.a.createElement("option",{value:""},"All"),t.props.search.expressionAuthors.map(function(t){return n.a.createElement("option",{value:t.authorShortId},t.authorTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Work Group"),n.a.createElement(d.default.Control,{as:"select",ref:"workGroup",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),e())),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Type"),n.a.createElement(d.default.Control,{as:"select",ref:"expressionType",onChange:this.handleOnShowQuotationsWithoutAssociation},n.a.createElement("option",{value:""},"All"),t.props.search.expressionTypes.map(function(t){return n.a.createElement("option",{value:t.expressionTypeShortId},t.expressionTypeTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Title"),n.a.createElement(d.default.Control,{as:"select",ref:"expressionId",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionId},n.a.createElement("option",{value:""},"All"),t.props.search.searchWorks.map(function(t){return n.a.createElement("option",{value:t.expressionShortId},t.expressionTitle)}))),n.a.createElement(d.default.Group,null,n.a.createElement(d.default.Label,null,"Text Part"),n.a.createElement(d.default.Control,{as:"select",ref:"expressionPart",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionPart+"/"+t.props.search.searchParameters.expressionLevel},n.a.createElement("option",{value:""},"All"),function(){var e=t.props.search.expressionParts;if(e){var r=e[0];if(r){var a=r.grandparent.split("http://scta.info/resource/")[1];if(void 0!=a)return n.a.createElement("option",{value:a+"/"+r.grandparent_level},"Up: ",r.grandparent_title)}}}(),function(){var e=t.props.search.expressionParts;if(e){var r=e[0];if(r){var a=r.parent.split("http://scta.info/resource/")[1];return n.a.createElement("option",{value:a+"/"+r.parent_level},"Current: ",r.parent_title)}}}(),function(){var e=t.props.search.expressionParts;if(e)return e.map(function(t){var e=t.childShortId?t.childShortId:t.child.split("http://scta.info/resource/")[1];if(t.child)return n.a.createElement("option",{value:e+"/"+t.child_level},t.child_title)})}()))))),n.a.createElement("p",null,n.a.createElement("a",{href:"#",onClick:this.handleGraph},"Toggle Historgram")))}}]),e}(n.a.Component),g=v(function(t){return t})(O),A=r(30),_=r.n(A),P=r(18).connect,x=r(17),b=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnClick",value:function(){var t=this.props,e=t.isInstanceOf,r=t.id,a=t.quotation,n=t.dispatch,o=t.source;n(x.changeQuotationsFocus(this.props.id));var i={id:r,quotation:a,source:o,type:"expression"};if(n(x.createFocusedQuotation(i)),n(x.fetchParagraph()),n(x.fetchSourceParagraph()),n(x.fetchManifestationQuotations()),null!=e){var s=this.props.canonicalQuotations.find(function(t){return t.id===e});if(void 0!=s){n(x.createCanonicalQuotation(s)),n(x.changeCanonicalQuotationsFocus(e));var c=document.getElementById(e).offsetTop;_()("#CanonicalQuotationList").animate({scrollTop:c-10},400);var u=document.getElementById(r).offsetTop;_()("#quotationsList").animate({scrollTop:u-10},400)}else alert("this quotation is assigned to a canonicalQuotation, but either there is an error in the id assigned or a canonicalQuotation record still needs to be made"),n(x.clearCanonicalQuotationsFocus()),n(x.clearCanonicalQuotation())}else n(x.clearCanonicalQuotationsFocus()),n(x.clearCanonicalQuotation())}},{key:"render",value:function(){var t=this.props,e=t.isInstanceOf,r=t.quotation,a=t.className,o=t.title,i=t.author,s=t.id,c=t.refText,u=t.citation;a=null===e?a+" isNotInstance":a;return n.a.createElement("div",{className:"quotation-wrapper"},n.a.createElement("p",{id:s,className:a,onClick:this.handleOnClick},r),n.a.createElement("a",{href:s,target:"_blank",className:"quotation-citation"},i,", ",o),n.a.createElement("a",{href:s,target:"_blank",className:"quotation-citation"},"Original Ref: ",c),n.a.createElement("a",{href:s,target:"_blank",className:"quotation-citation"},"Modern Citation: ",u))}}]),e}(n.a.Component),S=P(function(t){return t})(b),C=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.quotations,r=t.focusedQuotation;return n.a.createElement("div",null,n.a.createElement("p",null,"List of Expression Quotations"),"fetching"!==this.props.quotations&&n.a.createElement("p",null,"Count ",e.length),"fetching"===e?n.a.createElement("p",null,"Fetching..."):0===e.length?n.a.createElement("p",{className:"container__message"},"No Quotations"):e.map(function(t,e){var a="";a=r.id&&r.id.includes(t.id)?"quotation focused":"quotation",t.refType;var o=a+" "+t.refType;return n.a.createElement(S,Object.assign({className:o,key:e+"-"+t.id},t))}))}}]),e}(n.a.Component),w=Object(s.connect)(function(t){return t})(C),I=r(18).connect,R=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.focusedQuotation,e=t.quotation,r=t.id;return n.a.createElement("div",{className:"container"},n.a.createElement("p",null,"Focused Quotation: ",e),n.a.createElement("p",null,n.a.createElement("a",{href:r},r)))}}]),e}(n.a.Component),k=(I(function(t){return t})(R),r(18).connect),N=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.canonicalQuotation,e=t?t.quotation:"No canonical quotation id assigned",r=t?t.id:"",a=t?t.citation:"";return n.a.createElement("div",{className:"container"},n.a.createElement("p",null,"Canonical Quotation: ",e),n.a.createElement("p",null,a),n.a.createElement("p",null,n.a.createElement("a",{href:r},r)))}}]),e}(n.a.Component),j=(k(function(t){return t})(N),r(18).connect),q=r(17),L=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnClick",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.citation,n=t.dispatch;n(q.changeCanonicalQuotationsFocus(this.props.id));var o={id:e,quotation:r,citation:a};n(q.createCanonicalQuotation(o)),n(q.fetchQuotations()),n(q.clearQuotationsFocus()),n(q.clearFocusedQuotation()),n(q.clearManifestationQuotations()),n(q.clearParagraph());var i=document.getElementById(e).offsetTop;_()("#CanonicalQuotationList").animate({scrollTop:i-10},400)}},{key:"render",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.className,o=t.citation;return n.a.createElement("div",{className:"quotation-wrapper"},n.a.createElement("p",{id:e,className:a,onClick:this.handleOnClick},r),n.a.createElement("a",{href:e,target:"_blank",className:"quotation-citation"},o))}}]),e}(n.a.Component),F=j()(L),Q=r(17),D=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnShowQuotationsWithoutAssociation=r.handleOnShowQuotationsWithoutAssociation.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnShowQuotationsWithoutAssociation",value:function(t){t.preventDefault();var e=this.props.dispatch,r=this.refs.searchText.value;e(Q.clearCanonicalQuotation()),e(Q.clearFocusedQuotation()),e(Q.clearParagraph()),e(Q.fetchCanonicalQuotations(r)),e(Q.fetchQuotations(r))}},{key:"render",value:function(){var t=this.props.canonicalQuotations;return n.a.createElement("div",null,n.a.createElement("p",null,"List of Canonical Quotations"),n.a.createElement("p",null,"Count ",t.length),0===t.length?n.a.createElement("p",{className:"container__message"},"No Quotations"):t.map(function(t){var e=t.focused?"quotation focused":"quotation";return n.a.createElement(F,Object.assign({className:e,key:t.id},t))}))}}]),e}(n.a.Component),M=(Object(s.connect)(function(t){return t})(D),r(50)),H=r(51),W=r(65),U=r(18).connect,G=r(17),B=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r.handleToggleShowImage=r.handleToggleShowImage.bind(Object(m.a)(r)),r.handleToggleShowCitation=r.handleToggleShowCitation.bind(Object(m.a)(r)),r.handleImageWrapperWraperClick=r.handleImageWrapperWraperClick.bind(Object(m.a)(r)),r.state={imageSize:"300",imageFocus:!1,showImage:!1,showCitation:!1},r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleImageWrapperWraperClick",value:function(){this.setState(function(t){return{imageSize:"300"===t.imageSize?"800":"300",imageFocus:!t.imageFocus}})}},{key:"handleToggleShowImage",value:function(){console.log("test"),this.setState(function(t){return{showImage:!t.showImage}})}},{key:"handleToggleShowCitation",value:function(){this.setState(function(t){return{showCitation:!t.showCitation}})}},{key:"handleOnClick",value:function(){var t=this.props,e=t.isManifestationOf,r=t.id,a=t.quotation,n=t.dispatch,o={id:r,quotation:a,type:"manifestation"};n(G.createFocusedQuotation(o)),n(G.changeManifestationQuotationsFocus(r)),n(G.fetchParagraph());var i=document.getElementById(r).offsetTop;if(_()("#ManifestationQuotationsList").animate({scrollTop:i-10},400),null!=e){var s=this.props.quotations.find(function(t){return t.id===e});if(void 0!=s){n(G.changeQuotationsFocus(e));i=document.getElementById(e).offsetTop;_()("#quotationsList").animate({scrollTop:i-10},400);var c=s.isInstanceOf;if(null!=c){var u=this.props.canonicalQuotations.find(function(t){return t.id===c});if(void 0!=u){n(G.createCanonicalQuotation(u)),n(G.changeCanonicalQuotationsFocus(c));i=document.getElementById(c).offsetTop;_()("#CanonicalQuotationList").animate({scrollTop:i-10},400)}else n(G.clearCanonicalQuotationsFocus()),n(G.clearCanonicalQuotation())}}else n(G.clearQuotationsFocus()),n(G.clearCanonicalQuotation())}else n(G.clearQuotationsFocus()),n(G.clearCanonicalQuotationsFocus()),n(G.clearCanonicalQuotation())}},{key:"render",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.className,o=t.canonicalTranscription,i=[{manifestation:e,manifestationTitle:e.split("/resource/")[1],transcription:""}];return n.a.createElement("div",null,n.a.createElement("p",{id:e,className:a,onClick:this.handleOnClick},r,n.a.createElement("a",{href:e,className:"quotation-citation"},e),n.a.createElement("span",{onClick:this.handleToggleShowImage},n.a.createElement(W.b,null)),n.a.createElement("span",{onClick:this.handleToggleShowCitation},n.a.createElement(W.a,null))),n.a.createElement("div",{id:"mImageWrapperWrapper",className:this.state.imageFocus?"iww-big":"iww-small"},this.state.showImage&&n.a.createElement("div",{style:{padding:"2px 0"}},this.state.imageFocus?n.a.createElement("hr",{className:"toggleBar",title:"click to minimize",onClick:this.handleImageWrapperWraperClick}):n.a.createElement("hr",{className:"toggleBar",title:"click to maximize",onClick:this.handleImageWrapperWraperClick}),n.a.createElement(M.Surface3Wrapper,{hideSelectionList:!0,hideCustomImageForm:!0,manifestations:i,focusedManifestation:e,width:parseInt(this.state.imageSize)})),this.state.showCitation&&o&&n.a.createElement(H.Citation,{tresourceid:o})))}}]),e}(n.a.Component),X=U(function(t){return t})(B),Y=(r(17),function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.manifestationQuotations;return n.a.createElement("div",null,n.a.createElement("p",null,"List of Manifestation Quotations"),n.a.createElement("p",null,"Count ",t.length,t[0]&&t[0].isManifestationOf&&n.a.createElement(n.a.Fragment,null,"| ",n.a.createElement("a",{href:"https://lombardpress.org/collation-vizualizer/collatexView.html?id="+t[0].isManifestationOf,target:"_blank"},"Collation "),"| ",n.a.createElement("a",{href:"https://mirador.scta.info/?blockid="+t[0].isManifestationOf,target:"_blank"},n.a.createElement("img",{alt:"view in mirador",src:"https://projectmirador.org/img/mirador-logo.svg",style:{width:"12px",height:"12px"}})))),0===t.length?n.a.createElement("p",{className:"container__message"},"No Quotations"):t.map(function(t){var e=t.focused?"quotation focused":"quotation";return n.a.createElement(X,Object.assign({className:e,key:t.id},t))}))}}]),e}(n.a.Component)),z=Object(s.connect)(function(t){return t})(Y),K=r(41),V=r(18).connect,$=r(17),J=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleShowImages=r.handleShowImages.bind(Object(m.a)(r)),r.handleImageWrapperWraperClick=r.handleImageWrapperWraperClick.bind(Object(m.a)(r)),r.handleShowFullText=r.handleShowFullText.bind(Object(m.a)(r)),r.runQueryForSource=r.runQueryForSource.bind(Object(m.a)(r)),r.addTEICustom=r.addTEICustom.bind(Object(m.a)(r)),r.handleClearFilters=r.handleClearFilters,r.state={imageSize:"300",imageFocus:!1},r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleImageWrapperWraperClick",value:function(){this.setState(function(t){return{imageSize:"300"===t.imageSize?"800":"300",imageFocus:!t.imageFocus}})}},{key:"handleShowImages",value:function(t){t.preventDefault();var e=this.props.dispatch;e($.fetchImages()),e($.toggleImagesDisplay(this.props.images.visible))}},{key:"handleShowFullText",value:function(t){t.preventDefault();var e=this.props.dispatch;"source"===this.props.type?e($.fetchFullText(!0)):e($.fetchFullText(!1)),e($.toggleImagesDisplay(!0)),e($.toggleFullTextDisplay(this.props.fullText.visible))}},{key:"componentDidMount",value:function(t){this.addTEICustom()}},{key:"componentDidUpdate",value:function(t){this.addTEICustom()}},{key:"addTEICustom",value:function(){var t=this,e=new K.default,r={};if((r="source"===this.props.type?this.props.sourceParagraph:this.props.paragraph).paragraph_text)e.makeHTML5(r.paragraph_text,function(e){if(t.props.focusedQuotation.id){var r=t.props.focusedQuotation.id.split("/").pop();e.querySelector("#"+r)&&e.querySelector("#"+r).setAttribute("class","highlighted"),t.refs.text.replaceChild(e,t.refs.text.childNodes[0])}});else{var a=document.createTextNode("");t.refs.text.replaceChild(a,t.refs.text.childNodes[0])}}},{key:"runQueryForSource",value:function(t){var e=this.props,r=e.dispatch,a=(e.search,{quotationWorkPart:t});this.handleClearFilters(),r($.setSearchParameters(a)),r($.fetchQuotationWorkParts()),r($.fetchQuotations()),r($.fetchChart())}},{key:"handleClearFilters",value:function(t){var e=this.props,r=e.dispatch;e.search;r($.clearSearchParameters()),r($.clearCanonicalQuotations()),r($.clearQuotations()),r($.fetchQuotationWorkParts()),r($.fetchExpressionParts()),r($.fetchQuotationAuthors()),r($.fetchExpressionAuthors()),r($.fetchSearchWorksList()),r($.fetchQuotationWorksList()),r($.fetchWorkGroups()),r($.fetchAuthorTypes()),r($.clearManifestationQuotations())}},{key:"render",value:function(){var t=this,e=this,r={},a=r="source"===this.props.type?this.props.sourceParagraph:this.props.paragraph,o=(a.expression_id,a.manifestation_id),i=a.transcription_id,s=a.manifestations,c=(a.paragraph_text,a.review,i&&i.replace("sctar:","http://scta.info/resource/"));var u=[];return s&&s.constructor===Array?u=s.map(function(t){return{manifestation:t.replace("sctar:","http://scta.info/resource/"),manifestationTitle:t.replace("sctar:","http://scta.info/resource/").split("/resource/")[1],transcription:""}}):"string"===typeof s&&(u=[{manifestation:s.replace("sctar:","http://scta.info/resource/"),manifestationTitle:s.replace("sctar:","http://scta.info/resource/").split("/resource/")[1],transcription:""}]),n.a.createElement("div",null,n.a.createElement("p",null,"Context Paragraph"),n.a.createElement("div",{id:"text",ref:"text"},n.a.createElement("div",null)),o&&n.a.createElement("div",{id:"imageWrapperWrapper",className:this.state.imageFocus?"iww-big":"iww-small"},this.state.imageFocus?n.a.createElement("hr",{className:"toggleBar",title:"click to minimize",onClick:this.handleImageWrapperWraperClick}):n.a.createElement("hr",{className:"toggleBar",title:"click to maximize",onClick:this.handleImageWrapperWraperClick}),n.a.createElement(M.Surface3Wrapper,{manifestations:u,focusedManifestation:o,width:parseInt(this.state.imageSize),hideCustomImageForm:!0,hideSelectionList:!1})),function(){if(r.expression_id)return n.a.createElement("p",null,n.a.createElement("a",{onClick:e.handleShowFullText},"Show Full Text"))}(),o&&n.a.createElement("p",null,n.a.createElement("a",{href:"https://scta.lombardpress.org/res?resourceid="+o,target:"_blank"},"View in LbpWeb")),"source"===this.props.type&&this.props.focusedQuotation.id&&n.a.createElement("p",{className:"link",onClick:function(){t.runQueryForSource(t.props.sourceParagraph.expression_id.split("/resource/")[1])}},"Search Quotations of this Passage Only"),o&&n.a.createElement(H.Citation,{tresourceid:c}))}}]),e}(n.a.Component),Z=V(function(t){return t})(J),tt=r(18).connect,et=r(295),rt=(r(17),function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).createBarChart=r.createBarChart.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.chart.count;t&&this.createBarChart(t)}},{key:"componentDidUpdate",value:function(t,e){var r=this.props.chart.count;r!=t.chart.count&&this.createBarChart(r)}},{key:"componentWillUnmount",value:function(){et.selectAll(".tooltip").remove()}},{key:"createBarChart",value:function(t){et.select("svg").selectAll("*").remove(),et.selectAll(".tooltip").remove();var e=t;e.filter(function(t,e){t.count=+t.count});var r;r=e.map(function(t){return t.count}),e.map(function(t){return t.title});var a=30,n=30,o=40,i=50,s=500-a-o,c=1200-i-n,u=et.scale.linear().domain([0,.8*e.length,e.length]).range(["#FFB832","#C61C6F"]),p=et.scale.linear().domain([0,et.max(r)]).range([0,s]),l=et.scale.ordinal().domain(et.range(0,e.length)).rangeBands([0,c],.5),h=et.select("body").append("div").attr("class","tooltip").style("position","absolute").style("padding","0 10px").style("background","white").style("opacity",0),f=this.node;et.select(f).attr("width",c+i+n).attr("height",s+a+o).append("g").attr("transform","translate("+i+", "+a+")").selectAll("rect").data(e).enter().append("g").append("rect").style("fill",function(t,e){return u(e)}).attr("height",0).attr("y",s).attr("width",l.rangeBand()).attr("x",function(t,e){return l(e)}).on("mouseover",function(t){h.transition().style("opacity",.9),h.html("<a href='"+t.item+"'>"+t.title+"</a>. Quoted "+t.count+" times").style("left",et.event.pageX+0+"px").style("top",et.event.pageY+0+"px").style("left",et.select(f).left+150+"px").style("top",et.select(f).top+125+"px"),et.select(this).style("opacity",.5)}).on("mouseout",function(t){et.select(this).transition().style("opacity",1)}).transition().attr("height",function(t){return p(t.count)}).attr("y",function(t){return s-p(t.count)}).delay(function(t,e){return 10*e}).duration(1e3).ease("elastic");var m=et.scale.linear().domain([0,et.max(r)]).range([s,0]),d=et.svg.axis().scale(m).orient("left").ticks(10),T=et.select(f).append("g");d(T),T.attr("transform","translate("+i+", "+a+")"),T.selectAll("path").style({fill:"none",stroke:"#000"}),T.selectAll("line").style({stroke:"#000"});var E=et.svg.axis().scale(l).orient("bottom").tickValues(l.domain().filter(function(t,e){return e%50===0})),v=et.select(f).append("g");E(v),v.attr("transform","translate("+i+", "+(s+a)+")"),v.selectAll("path").style({fill:"none",stroke:"#000"}),v.selectAll("line").style({stroke:"#000"})}},{key:"render",value:function(){var t=this;return n.a.createElement("svg",{ref:function(e){return t.node=e},width:500,height:500})}}]),e}(n.a.Component)),at=tt(function(t){return{chart:t.chart}},function(t){return{}})(rt),nt=r(129),ot=r.n(nt),it=(r(321),r(18).connect),st=r(17),ct=(r(41),function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleToggleImage=r.handleToggleImage.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t){}},{key:"handleToggleImage",value:function(t){t.preventDefault(),(0,this.props.dispatch)(st.toggleImagesDisplay(this.props.images.visible))}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"images"},n.a.createElement(ot.a,{manifestations:[{manifestation:"http://scta.info/resource/l1-cpspfs/reims",manifestationTitle:"reims",transcription:""},{manifestation:"http://scta.info/resource/l1-cpspfs/svict",manifestationTitle:"svict",transcription:""}],focusedManifestation:"http://scta.info/l1-cpspfs/reims"}),function(){var e=t.props.images;if(e.visible&&e.images.length>0)return e.images.map(function(t){var e=t.url;return n.a.createElement("img",{src:e+"/full/1000,/0/default.jpg"})})}())}}]),e}(n.a.Component)),ut=it(function(t){return t})(ct),pt=r(18).connect,lt=r(17),ht=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleToggleFullText=r.handleToggleFullText.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidUpdate",value:function(){var t=this,e=new K.default;this.props.fullText.textInfo.text&&e.makeHTML5(this.props.fullText.textInfo.text,function(e){var r=t.props.focusedQuotation.id.split("/").pop(),a=t.props.focusedQuotation.source.split("/").pop();t.refs.text.replaceChild(e,t.refs.text.childNodes[0]);var n="";try{e.querySelector("#"+r)&&e.querySelector("#"+r).setAttribute("class","highlighted"),n=document.getElementById(r).offsetTop}catch(o){e.querySelector("#"+a)&&e.querySelector("#"+a).setAttribute("class","highlighted"),n=document.getElementById(a).offsetTop}console.log("scroll",n),_()(".full-text-wrapper").animate({scrollTop:n-100},400)})}},{key:"handleToggleFullText",value:function(t){t.preventDefault(),(0,this.props.dispatch)(lt.toggleFullTextDisplay(this.props.fullText.visible))}},{key:"render",value:function(){return n.a.createElement("div",{className:"full-text-wrapper"},n.a.createElement("div",{id:"text-tool-bar"},n.a.createElement("button",{id:"hide-full-text",onClick:this.handleToggleFullText},"Hide Text")),n.a.createElement("div",{id:"text",ref:"text"},n.a.createElement("div",null)))}}]),e}(n.a.Component),ft=pt(function(t){return t})(ht),mt=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"search column1"},n.a.createElement(g,null)),function(){if(!t.props.chart.visible&&!t.props.images.visible&&!t.props.fullText.visible)return n.a.createElement("div",null,n.a.createElement("div",{id:"quotationsList",className:"column2"},n.a.createElement(w,null)),n.a.createElement("div",{id:"ManifestationQuotationsList",className:"column3"},n.a.createElement(z,null)),n.a.createElement("div",{className:"column4"},n.a.createElement(Z,null)),n.a.createElement("div",{className:"column5"},n.a.createElement(Z,{type:"source"})))}(),function(){if(t.props.chart.visible)return n.a.createElement("div",{className:"chart"},n.a.createElement(at,{size:[500,500]}))}(),function(){if(t.props.images.visible)return n.a.createElement("div",null,n.a.createElement(ut,null),n.a.createElement("div",{className:"column5"},n.a.createElement(Z,null)))}(),function(){if(t.props.fullText.visible)return n.a.createElement(ft,null)}()))}}]),e}(n.a.Component),dt=Object(s.connect)(function(t){return t})(mt),Tt=function(t){return n.a.createElement("div",null,n.a.createElement("h3",{className:"page-title"},n.a.createElement("em",null,"Ad fontes"),": A Scholastic Quotation Explorer"),n.a.createElement("div",{className:"page-header"},n.a.createElement("p",null,"A ",n.a.createElement("a",{href:"http://lombardpress.org"},"LombardPress")," Publication"),n.a.createElement("p",null,"Powerd by Data from the ",n.a.createElement("a",{href:"https://scta.info"},"Scholastic Commentaries and Text Archive")),n.a.createElement("p",null,"Designed by ",n.a.createElement("a",{href:"http://jeffreycwitt.com"},"Jeffrey C. Witt"))),n.a.createElement(dt,null))},Et=r(17),vt=(r(322),r(323),r(328).configure());vt.subscribe(function(){vt.getState()}),vt.dispatch(Object(Et.setSearchParameters)({})),vt.dispatch(Object(Et.fetchQuotationAuthors)()),vt.dispatch(Object(Et.fetchExpressionAuthors)()),vt.dispatch(Object(Et.fetchSearchWorksList)()),vt.dispatch(Object(Et.fetchExpressionTypes)()),vt.dispatch(Object(Et.fetchQuotationExpressionTypes)()),vt.dispatch(Object(Et.fetchQuotationWorksList)()),vt.dispatch(Object(Et.fetchWorkGroups)()),vt.dispatch(Object(Et.fetchAuthorTypes)()),vt.dispatch(Object(Et.fetchChart)()),i.a.render(n.a.createElement(s.Provider,{store:vt},n.a.createElement(Tt,null)),document.getElementById("root"))},328:function(t,e,r){"use strict";r.r(e);var a=r(19);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CLEAR_SEARCH_PARAMETERS":return o({},t,{searchParameters:[]});case"SET_SEARCH_PARAMETERS":return o({},t,{searchParameters:e.searchParameters});case"START_SEARCH_WORKS_FETCH":return o({},t,{searchWorks:[]});case"COMPLETE_SEARCH_WORKS_FETCH":return o({},t,{searchWorks:e.listOfWorks});case"START_QUOTATION_AUTHORS_FETCH":return o({},t,{quotationAuthors:[]});case"COMPLETE_QUOTATION_AUTHORS_FETCH":return o({},t,{quotationAuthors:e.authors});case"START_EXPRESSION_AUTHORS_FETCH":return o({},t,{expressionAuthors:[]});case"COMPLETE_EXPRESSION_AUTHORS_FETCH":return o({},t,{expressionAuthors:e.authors});case"START_QUOTATION_WORKS_LIST_FETCH":return o({},t,{quotationWorksList:[]});case"COMPLETE_QUOTATION_WORKS_LIST_FETCH":return o({},t,{quotationWorksList:e.quotationWorksList});case"START_QUOTATION_WORK_PARTS_FETCH":return o({},t,{quotationWorkParts:[]});case"COMPLETE_QUOTATION_WORK_PARTS_FETCH":return o({},t,{quotationWorkParts:e.parts});case"START_EXPRESSION_PARTS_FETCH":return o({},t,{expressionParts:[]});case"COMPLETE_EXPRESSION_PARTS_FETCH":return o({},t,{expressionParts:e.parts});case"START_EXPRESSION_TYPE_FETCH":return o({},t,{expressionTypes:[]});case"COMPLETE_EXPRESSION_TYPE_FETCH":return o({},t,{expressionTypes:e.expressionTypes});case"START_QUOTATION_EXPRESSION_TYPE_FETCH":return o({},t,{quotationExpressionTypes:[]});case"COMPLETE_QUOTATION_EXPRESSION_TYPE_FETCH":return o({},t,{quotationExpressionTypes:e.quotationExpressionTypes});case"START_WORK_GROUPS_FETCH":return o({},t,{workGroups:[]});case"COMPLETE_WORK_GROUPS_FETCH":return o({},t,{workGroups:e.workGroups});case"START_AUTHOR_TYPES_FETCH":return o({},t,{authorTypes:[]});case"COMPLETE_AUTHOR_TYPES_FETCH":return o({},t,{authorTypes:e.authorTypes});default:return t}};function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_GRAPH_DISPLAY":return c({},t,{visible:!e.current});case"START_CHART_FETCH":return c({},t,{count:[]});case"COMPLETE_CHART_FETCH":return c({},t,{count:e.count});default:return t}};function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_IMAGES_DISPLAY":return l({},t,{visible:!e.current});case"START_IMAGES_FETCH":return l({},t,{images:[]});case"COMPLETE_IMAGES_FETCH":return l({},t,{images:e.images});default:return t}},f=r(27);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_QUOTATIONS":case"ADD_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_QUOTATIONS":return[];case"START_QUOTATIONS_FETCH":return"fetching";case"COMPLETE_QUOTATIONS_FETCH":return e.quotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,title:t.toplevel_expression_title.value,author:t.author_title.value,focused:!1,isInstanceOf:t.isInstanceOf?t.isInstanceOf.value:null,source:t.source?t.source.value:null,citation:t.citation?t.citation.value:null,refText:t.refText?t.refText.value:null,refType:t.refType?t.refType.value.split("/resource/").reverse()[0]:null}});case"CHANGE_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?d({},t,{focused:!0}):d({},t,{focused:!1})});return Object(f.a)(r);default:return t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CREATE_FOCUSED_QUOTATION":return e.quotation;case"CLEAR_FOCUSED_QUOTATION":return{};default:return t}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CREATE_CANONICAL_QUOTATION":return e.quotation;case"CLEAR_CANONICAL_QUOTATION":return null;default:return t}};function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CANONICAL_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_CANONICAL_QUOTATIONS":case"START_CANONICAL_QUOTATIONS_FETCH":return[];case"COMPLETE_CANONICAL_QUOTATIONS_FETCH":return e.canonicalQuotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,citation:t.citation?t.citation.value:"citation not yet recorded",focused:!1}});case"CLEAR_CANONICAL_QUOTATIONS_FOCUS":return t.map(function(t){return O({},t,{focused:!1})});case"CHANGE_CANONICAL_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?O({},t,{focused:!0}):O({},t,{focused:!1})});return Object(f.a)(r);default:return t}};function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_MANIFESTATION_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_MANIFESTATION_QUOTATIONS":case"START_MANIFESTATION_QUOTATIONS_FETCH":return[];case"COMPLETE_MANIFESTATION_QUOTATIONS_FETCH":return e.manifestationQuotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,focused:!1,isManifestationOf:t.isManifestationOf?t.isManifestationOf.value:null,canonicalTranscription:t.canonicalTranscription?t.canonicalTranscription.value:null}});case"CLEAR_MANIFESTATION_QUOTATIONS_FOCUS":return t.map(function(t){return _({},t,{focused:!1})});case"CHANGE_MANIFESTATION_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?_({},t,{focused:!0}):_({},t,{focused:!1})});return Object(f.a)(r);default:return t}};function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_PARAGRAPH":return e.paragraph;case"CLEAR_PARAGRAPH":case"START_PARAGRAPH_FETCH":return{};case"COMPLETE_PARAGRAPH_FETCH":return e.paragraph;case"START_REVIEW_FETCH":return t;case"COMPLETE_REVIEW_FETCH":return b({},t,{review:e.review});default:return t}};function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_SOURCE_PARAGRAPH":return e.sourceParagraph;case"CLEAR_SOURCE_PARAGRAPH":case"START_SOURCE_PARAGRAPH_FETCH":return{};case"COMPLETE_SOURCE_PARAGRAPH_FETCH":return e.sourceParagraph;case"START_SOURCE_PARAGRAPH_REVIEW_FETCH":return t;case"COMPLETE_SOURCE_PARAGRAPH_REVIEW_FETCH":return w({},t,{review:e.review});default:return t}};function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_FULL_TEXT_DISPLAY":return k({},t,{visible:!e.current});case"ADD_FULL_TEXT":return k({},t,{textInfo:e.text});case"CLEAR_FULL_TEXT":case"START_FULL_TEXT_FETCH":return k({},t,{textInfo:{}});case"COMPLETE_FULL_TEXT_FETCH":return k({},t,{textInfo:e.text});default:return t}};r.d(e,"configure",function(){return L});var j=r(61),q=r(324).default,L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=j.combineReducers({search:i,quotations:T,focusedQuotation:E,canonicalQuotation:v,canonicalQuotations:g,manifestationQuotations:P,paragraph:S,sourceParagraph:I,chart:u,images:h,fullText:N}),r=j.createStore(e,t,j.compose(j.applyMiddleware(q),window.devToolsExtension?window.devToolsExtension():function(t){return t}));return r}},41:function(t,e,r){"use strict";r.r(e);var a=r(8),n=r(9),o=r(294),i=function(){function t(e){if(Object(a.a)(this,t),this.els=[],this.behaviors=[],this.hasStyle=!1,this.prefixes=[],e)this.base=e;else try{window&&(this.base=window.location.href.replace(/\/[^\/]*$/,"/"))}catch(r){this.base=""}this.behaviors.push(o),this.supportsShadowDom=document.head.createShadowRoot||document.head.attachShadow}return Object(n.a)(t,[{key:"getHTML5",value:function(t,e,r){var a=this;return window.location.href.startsWith(this.base)&&t.indexOf("/")>=0&&(this.base=t.replace(/\/[^\/]*$/,"/")),new Promise(function(e,r){var a=new XMLHttpRequest;a.open("GET",t),a.send(),a.onload=function(){this.status>=200&&this.status<300?e(this.response):r(this.statusText)},a.onerror=function(){r(this.statusText)}}).catch(function(t){console.log(t)}).then(function(t){return a.makeHTML5(t,e,r)})}},{key:"makeHTML5",value:function(t,e,r){var a=(new DOMParser).parseFromString(t,"text/xml"),n=this.domToHTML5(a,e,r);return this.registerTEIElements(n,e)}},{key:"domToHTML5",value:function(t,e,r){var a=this;this._fromTEI(t);return this.dom=function t(e){var n,o=!1;switch(e.namespaceURI){case"http://www.tei-c.org/ns/1.0":n=document.createElement("tei-"+e.tagName);break;case"http://www.tei-c.org/ns/Examples":if("egXML"==e.tagName){n=document.createElement("teieg-"+e.tagName);break}case"http://relaxng.org/ns/structure/1.0":n=document.createElement("rng-"+e.tagName);break;default:n=document.importNode(e,!1),o=!0}for(var i=0,s=Array.from(e.attributes);i<s.length;i++){var c=s[i];!c.name.startsWith("xmlns")||o?n.setAttribute(c.name,c.value):"xmlns"==c.name&&n.setAttribute("data-xmlns",c.value),"xml:id"!=c.name||o||n.setAttribute("id",c.value),"xml:lang"!=c.name||o||n.setAttribute("lang",c.value),"rendition"==c.name&&n.setAttribute("class",c.value.replace(/#/g,""))}if(n.setAttribute("data-teiname",e.localName),0==e.childNodes.length&&n.setAttribute("data-empty",""),"tagsDecl"==e.localName){for(var u=document.createElement("style"),p=0,l=Array.from(e.childNodes);p<l.length;p++){var h=l[p];if(h.nodeType==Node.ELEMENT_NODE&&"rendition"==h.localName&&"css"==h.getAttribute("scheme")){var f="";h.hasAttribute("selector")?(f+=h.getAttribute("selector").replace(/([^#, >]+\w*)/g,"tei-$1").replace(/#tei-/g,"#")+"{\n",f+=h.textContent):(f+="."+h.getAttribute("xml:id")+"{\n",f+=h.textContent),f+="\n}\n",u.appendChild(document.createTextNode(f))}}u.childNodes.length>0&&(n.appendChild(u),a.hasStyle=!0)}"prefixDef"==e.localName&&(a.prefixes.push(e.getAttribute("ident")),a.prefixes[e.getAttribute("ident")]={matchPattern:e.getAttribute("matchPattern"),replacementPattern:e.getAttribute("replacementPattern")});for(var m=0,d=Array.from(e.childNodes);m<d.length;m++){var T=d[m];T.nodeType==Node.ELEMENT_NODE?n.appendChild(t(T)):n.appendChild(T.cloneNode())}return r&&r(n),n}(t.documentElement)}},{key:"registerTEIElements",value:function(t,e){if(t.registerElement?this.registerAll(this.els):this.fallback(this.els),this.done=!0,!e)return this.dom;e(this.dom,this)}},{key:"addStyle",value:function(t,e){this.hasStyle&&t.getElementsByTagName("head").item(0).appendChild(e.getElementsByTagName("style").item(0).cloneNode(!0))}},{key:"addShadowStyle",value:function(t){this.shadowCSS&&(t.innerHTML='<style>@import url("'+this.shadowCSS+'");</style>'+t.innerHTML)}},{key:"addBehaviors",value:function(t){t.handlers||t.fallbacks?this.behaviors.push(t):console.log("No handlers or fallback methods found.")}},{key:"setBaseUrl",value:function(t){this.base=t}},{key:"_fromTEI",value:function(t){var e=t.documentElement;this.els=new Set(Array.from(e.getElementsByTagNameNS("http://www.tei-c.org/ns/1.0","*"),function(t){return t.tagName})),this.els.add("egXML"),this.els.add(e.tagName)}},{key:"_insert",value:function(t,e){var r=document.createElement("span");return e.length>1?e[0].includes("<")&&e[1].includes("</")?r.innerHTML=e[0]+t.innerHTML+e[1]:r.innerHTML="<span>"+e[0]+"</span>"+t.innerHTML+"<span>"+e[1]+"</span>":e[0].includes("<")?r.innerHTML=e[0]+t.innerHTML:r.innerHTML="<span>"+e[0]+"</span>"+t.innerHTML,r.children.length>1?r:r.children[0]}},{key:"_template",value:function(t,e){var r=t;if(t.search(/$(\w*)@(\w+)/))for(var a,n=/\$(\w*)@(\w+)/g;a=n.exec(t);)e.hasAttribute(a[2])&&(r=a[1]&&this[a[1]]?r.replace(a[0],this[a[1]].call(this,e.getAttribute(a[2]))):r.replace(a[0],e.getAttribute(a[2])));return r}},{key:"tagName",value:function(t){return"egXML"==t?"teieg-"+t:"tei-"+t}},{key:"decorator",value:function(t){var e=this;return function(r){for(var a=[],n=0;n<t.length;n++)a.push(e._template(t[n],r));return e._insert(r,a)}}},{key:"getHandler",value:function(t){for(var e=this.behaviors.length-1;e>=0;e--)if(this.behaviors[e].handlers[t])return Array.isArray(this.behaviors[e].handlers[t])?this.append(this.decorator(this.behaviors[e].handlers[t])):this.append(this.behaviors[e].handlers[t])}},{key:"getFallback",value:function(t){for(var e=this.behaviors.length-1;e>=0;e--)if(this.behaviors[e].handlers[t])return Array.isArray(this.behaviors[e].handlers[t])?this.decorator(this.behaviors[e].handlers[t]):this.behaviors[e].handlers[t]}},{key:"append",value:function(t,e){if(!e){var r=this;return this.supportsShadowDom?function(){var e=t.call(r,this);e&&r._appendShadow(this,e)}:function(){var e=t.call(r,this);e&&!this.querySelector(":scope > "+e.nodeName)&&r._appendBasic(this,e)}}var a=t.call(this,e);a&&!e.querySelector(":scope > "+a.nodeName)&&(this.supportsShadowDom?this._appendShadow(e,a):this._appendBasic(e,a))}},{key:"_appendShadow",value:function(t,e){var r=t.attachShadow({mode:"open"});this.addShadowStyle(r),r.appendChild(e)}},{key:"_appendBasic",value:function(t,e){this.hideContent(t),t.appendChild(e)}},{key:"registerAll",value:function(t){var e=!0,r=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,s=Object.create(HTMLElement.prototype),c=this.getHandler(i);c&&(s.createdCallback=c);var u=this.tagName(i);try{document.registerElement(u,{prototype:s})}catch(p){console.log(u+" couldn't be registered or is already registered."),console.log(p)}}}catch(l){r=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"fallback",value:function(t){var e=!0,r=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,s=this.getFallback(i);if(s)for(var c=0,u=Array.from(this.dom.getElementsByTagName(this.tagName(i)));c<u.length;c++){var p=u[c];this.append(s,p)}}}catch(l){r=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"rw",value:function(t){return t.match(/^(?:http|mailto|file|\/|#).*$/)?t:this.base+t}},{key:"first",value:function(t){return t.replace(/ .*$/,"")}},{key:"serialize",value:function(t,e){var r="";if(!e){r+="&lt;"+t.getAttribute("data-teiname");for(var a=0,n=Array.from(t.attributes);a<n.length;a++){var o=n[a];o.name.startsWith("data-")||["id","lang","class"].includes(o.name)||(r+=" "+o.name+'="'+o.value+'"'),"data-xmlns"==o.name&&(r+=' xmlns="'+o.value+'"')}t.childNodes.length>0?r+=">":r+="/>"}for(var i=0,s=Array.from(t.childNodes);i<s.length;i++){var c=s[i];switch(c.nodeType){case Node.ELEMENT_NODE:r+=this.serialize(c);break;case Node.PROCESSING_INSTRUCTION_NODE:r+="&lt;?"+c.nodeValue+"?>";break;case Node.COMMENT_NODE:r+="&lt;!--"+c.nodeValue+"--\x3e";break;default:r+=c.nodeValue.replace(/</g,"&lt;")}}return!e&&t.childNodes.length>0&&(r+="&lt;/"+t.getAttribute("data-teiname")+">"),r}},{key:"hideContent",value:function(t){if(t.childNodes.length>0){var e=t.innerHTML;t.innerHTML="";var r=document.createElement("span");r.setAttribute("style","display:none;"),r.setAttribute("class","hide"),r.innerHTML=e,t.appendChild(r)}}},{key:"unEscapeEntities",value:function(t){return t.replace(/&gt;/,">").replace(/&quot;/,'"').replace(/&apos;/,"'").replace(/&amp;/,"&")}},{key:"savePosition",value:function(){localStorage.setItem("scroll",window.scrollY)}},{key:"restorePosition",value:function(){localStorage.getItem("scroll")&&window.scrollTo(0,localStorage.getItem("scroll"))}},{key:"fromODD",value:function(){}}]),t}();try{window&&(window.CETEI=i,window.unload=i.savePosition,window.load=i.restorePosition)}catch(s){}e.default=i}},[[131,1,2]]]);
//# sourceMappingURL=main.5cebd165.chunk.js.map